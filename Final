/* Z1829678 - Christopher Adams
 * ******** Z1805732 - Kevin Lewis <-   Did not write any of this code
 *                                      Stopped responding to my texts when I asked him to contribute on Github on day assignment was due
 *                                      
 * 
 * CSCI 473 - Assignment 1:Getting Comfortable
 * Creates an option list
 * */


using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;



namespace Assigment_1
{
    //global variables
    public static class Globals
    {
        public static uint MAX_LEVEL = 60;
        public static uint GEAR_SLOTS = 14;
        public static int MAX_INVENTORY_SIZE = 20;
        public static uint MAX_ILLVL = 360;
        public static uint MAX_PRIMARY = 200;
        public static uint MAX_STAMINA = 275;

    }

    //Types of items
    public enum ItemType
    {
        Helmet, Neck, Shoulders, Back, Chest,
        Wrist, Gloves, Belt, Pants, Boots,
        Ring, Trinket
    };

    //Races
    public enum Race { Orc, Troll, Tauren, Forsaken };

    /*GuildExistException
     * lets user know that the guild they entered doesn't exist
     * */
    public class GuildExistException : Exception // Deriving from the "Exception" base class
    {
        public override string ToString()
        {
            return "That guild does not exist!";
        }
    }

    /*PlayerExistException
     * lets user know that the player they entered doesn't exist
     * */
    public class PlayerExistException : Exception // Deriving from the "Exception" base class
    {
        public override string ToString()
        {
            return "That player does not exist!";
        }
    }

    /*ItemExistException
     * lets user know that the item they entered doesn't exist
     * */
    public class ItemExistException : Exception // Deriving from the "Exception" base class
    {
        public override string ToString()
        {
            return "That item does not exist!";
        }
    }

    /*LevelException
     * lets user know that the item level of the item they want to equip is too high
     * */
    public class LevelException : Exception // Deriving from the "Exception" base class
    {
        public override string ToString()
        {
            return "Item level is too high";
        }
    }

    /*ItemExistException
     * lets user know that the inventory is full
     * */
    public class InventoryFullException : Exception // Deriving from the "Exception" base class
    {
        public override string ToString()
        {
            return "The inventory is full";
        }
    }

    /*Guild Class
     * creates a guild object with an id and a name
     * */
    public class Guild : IComparable
    {
        //guild vars
        private uint id;
        private string name;

        //public properties
        #region

        //Free R/W
        public uint Id
        {
            get { return id; }
            set { id = value; }
        }

        //Free R/W
        public string Name
        {
            get { return name; }
            set { name = value; }
        }
        #endregion

        /*Default constructor 
         * no arguments
         * */
        public Guild()
        {
            Id = 0;
            Name = "";
        }

        /*Default constructor 
         * arguments for id and name
         * */
        public Guild(uint iId, string iName)
        {
            Id = iId;
            Name = iName;
        }


        /* To string
         * Output the guild
         * */
        public override string ToString()
        {
            //Displays the guild id and name
            string output = String.Format("{0}", this.Name);
            return output;
        }


        /*IComparable
        * overrides comparable
        * */
        public int CompareTo(object alpha)
        {
            //Check for null values
            if (alpha == null) return 1;

            //typecast
            Guild rightOp = alpha as Guild;

            //Items are compared by name
            if (rightOp != null)
                return Name.CompareTo(rightOp.Name);
            else
                throw new ArgumentException("Guild CompareTo argument is not an item");
        }
    }


    /* Player Class
     * Player Object has an id, name, race, level, exp, guildID, gear,inventory
     * */
    public class Player : IComparable
    {

        //attributes of player class
        private uint id;
        private string name;
        private Race playerRace;
        private uint level;
        private uint exp;
        private uint guildID;
        private uint[] gear;
        private List<uint> inventory;
        //boolean for ring and trinket
        //true means insert into lower slot, false means insert into higher
        private bool ring;
        private bool trinket;

        //public properties
        #region
        //R only
        public uint Id
        {
            get { return id; }
            private set { id = value; }
        }

        //R only
        public string Name
        {
            get { return name; }
            private set { name = value; }
        }

        //R only, 4 possible races
        public Race PlayerRace
        {
            get { return playerRace; }
            private set
            {
                if (value >= (Race)0 || value <= (Race)3)
                    playerRace = value;
                else
                {
                    Console.WriteLine(value + " is not a valid race id");
                }


            }
        }

        //Free R/W, [0, MAX_LEVEL]
        public uint Level
        {
            get { return level; }
            set
            {
                if (value >= 0 || value <= Globals.MAX_LEVEL)
                    level = value;
                else
                {
                    Console.WriteLine(value + "is not a valid level");
                }
            }
        }

        //Normal R access, W acces increments exp and increases level appropriatly
        public uint Exp
        {
            get { return exp; }
            set
            {
                exp = exp + value;
                addExp(value);
            }
        }

        //R/W access
        public uint GuildID
        {
            get { return guildID; }
            set { guildID = value; }
        }

        //private R/W access
        private bool Ring
        {
            get { return ring; }
            set { ring = value; }
        }

        //private R/W access
        private bool Trinket
        {
            get { return trinket; }
            set { trinket = value; }
        }

        #endregion
        //indexer for gear
        public uint this[uint index]
        {
            get { return gear[index]; }
            set { gear[index] = value; }
        }

        /*addExp
         * adds experience to the character, 
         * increases level when more than (current level*1000) experince is awarded
         * */
        public void addExp(uint newExp)
        {
            //add experience
            //if the amount of experience added is more than the level requirement and level is not max level
            //loop subtracts used exp from added exp, increases level, and says Ding on every level up
            while (newExp > this.Level * 1000 && this.Level != Globals.MAX_LEVEL)
            {
                //subtract the current level requiremnet from the amount of exp added
                newExp = newExp - this.Level * 1000;
                //increase level
                this.Level++;
                //let user know level up occurred
                Console.WriteLine("Ding!");
            }

        }

        /* Default Constructor
         * No Arguments
         * */
        public Player()
        {
            Id = 0;
            Name = "";
            PlayerRace = 0;
            Level = 1;
            Exp = 0;
            GuildID = 0;
            inventory = new List<uint>();
            gear = new uint[Globals.GEAR_SLOTS];

        }

        /* Constructor
         * Arguments are id, name, race, level, exp, guildID, and every item type
         * */
        public Player(uint iID, string iName, Race iPlayerRace, uint iLevel, uint iExp, uint iGuildID,
            uint helmet, uint neck, uint shoulders, uint back, uint chest, uint wrist, uint gloves, uint belt, uint pants, uint boots, uint ring1, uint ring2, uint trinket1, uint trinket2)
        {
            Id = iID;
            Name = iName;
            PlayerRace = iPlayerRace;
            Level = iLevel;
            Exp = iExp;
            GuildID = iGuildID;
            inventory = new List<uint>();
            gear = new uint[Globals.GEAR_SLOTS];
            gear = new uint[] { helmet, neck, shoulders, back, chest, wrist, gloves, belt, pants, boots, ring1, ring2, trinket1, trinket2 };
            //if lower slot is empty or both are full, insert into lower slot
            if (this[10] == 0 || (this[10] != 0 && this[11] != 0))
            {
                Ring = true;
            }
            //if only lower slot is full, insert into higher
            else if (this[10] != 0)
            {
                Ring = false;
            }

            //if lower slot is empty or both are full, insert into lower slot
            if (this[12] == 0 || (this[12] != 0 && this[13] != 0))
            {
                Trinket = true;
            }
            //if only lower slot is full, insert into higher
            else if (this[12] != 0)
            {
                Trinket = false;
            }
        }


        /* PrintGearList
         * prints out the player gear that is equipped
         * */
        public void PrintGearList()
        {
            Console.WriteLine(this);
            //For each slot of a player, print out the gear
            for (uint i = 0; i < Globals.GEAR_SLOTS; i++)
            {
                //Print
                if (Program.dictItems.ContainsKey(this[i]))
                {
                    Console.WriteLine(Program.dictItems[this[i]]);
                }
                else
                {
                    uint slot = i;
                    switch (slot)
                    {
                        //11th gear slot is 10th item type
                        case 11:
                            slot--;
                            break;
                        //12th gear slot is 11th item type
                        case 12:
                            slot--;
                            break;
                        //13th gear slot is 11th item type
                        case 13:
                            slot = slot - 2;
                            break;
                    }


                    Console.WriteLine("(" + (ItemType)slot + ") None\n");
                }
            }



        }

        /* Equip Gear
         * takes item id and equips the item
         * places rings and trinkets into open slot, or if both slots full alternates between higher and lower
         * */
        public void EquipGear(uint gearID)
        {
            try
            {
                //see if item exists
                if (!Program.dictItems.ContainsKey(gearID))
                {
                    throw new ItemExistException();
                }

                //see if item level is valid
                if (this.Level < Program.dictItems[gearID].Requirement)
                {
                    throw new LevelException();
                }
            }
            catch (ItemExistException itemException)
            {
                Console.WriteLine(itemException);
                return;
            }
            catch (LevelException lvlException)
            {
                Console.WriteLine(lvlException);
                return;
            }

            //The item exists and the level is valid
            //if the item is not ring or trinket, equip
            if (Convert.ToUInt32(Program.dictItems[gearID].Type) < 10)
            {
                //equip th item into the correct slot
                this[Convert.ToUInt32(Program.dictItems[gearID].Type)] = gearID;
            }
            //if the item is a ring
            else if (Convert.ToUInt32(Program.dictItems[gearID].Type) < 11)
            {
                //change boolean once entered
                //if true place in lower slot
                if (this.Ring == true)
                {
                    this[10] = gearID;
                    this.Ring = false;
                }
                //not true put in higher slot
                else
                {
                    this[11] = gearID;
                    this.Ring = true;
                }
            }
            //if the item is a trinket
            else
            {
                //change boolean once entered
                //if true place in lower slot
                if (this.Trinket == true)
                {
                    this[12] = gearID;
                    this.Trinket = false;
                }
                //not true put in higher slot
                else
                {
                    this[13] = gearID;
                    this.Trinket = true;
                }
            }
            Console.WriteLine(this.Name + " has successfully equipped " + Program.dictItems[gearID].Name + "!");
        }

        /* UnequipGear
         * Takes the item id and unequips that item
         * */
        public void UnequipGear(int slotID)
        {
            
            try
            {
                //unequip the slot they select
                if (slotID < 10)
                {
                    //add the item to the inventory 
                    this.AddInventory(this[Convert.ToUInt32(slotID)]);
                    this[Convert.ToUInt32(slotID)] = 0;
                    Console.WriteLine(this.Name + " has successfully unequipped " + (ItemType)slotID + "!");
                }
                //if they choose ring, unequip both rings and inform user
                //set boolean to true/lower slot
                else if(  slotID < 11)
                {
                    this.AddInventory(this.gear[10]);
                    this.AddInventory(this.gear[11]);
                    this.gear[10] = 0;
                    this.gear[11] = 0;
                    this.Ring = true;
                    Console.WriteLine(this.Name + " has successfully unequipped " + (ItemType)slotID + "s!");
                }
                //if they choose trinket, unequip trinkets and inform user
                //set boolean to true/lower slot
                else if (slotID < 12)
                {
                    this.AddInventory(this.gear[12]);
                    this.AddInventory(this.gear[13]);
                    this.gear[12] = 0;
                    this.gear[13] = 0;
                    this.Trinket = true;
                    Console.WriteLine(this.Name + " has successfully unequipped " + (ItemType)slotID + "s!");
                }
                else
                {
                    Console.WriteLine(slotID + " is not an option");
                }
            }//end of try

            catch (InventoryFullException fullException)
            {
                Console.WriteLine(fullException);
            }
            catch (ItemExistException itemEException)
            {
                Console.WriteLine(itemEException);
            }
            catch (IndexOutOfRangeException)
            {
                Console.WriteLine(slotID + " is not an option");
            }

            
            
        }
    

        /* AddInventory
         * takes an item id and adds the item to the invetory
         * */
         public void AddInventory(uint gearID)
        {
            if ( !Program.dictItems.ContainsKey(gearID) )
            {
                throw new ItemExistException();
            }
            if(this.inventory.Count >= Globals.MAX_INVENTORY_SIZE)
            {
                throw new InventoryFullException();
            }

            this.inventory.Add(gearID);

        }
 
        

        /*To String
         * outputs player name, race, level, and guild
         * */
        public override string ToString()
        {
            //Displays the player name, race, level, and guild
            string raceString = "" + (Race)this.PlayerRace;
            string levelString = "" + this.Level;
            //if the player is in a guild it will say which guild, if not then nothing
            string guildString = "";
            if (Program.dictGuilds.ContainsKey( this.guildID ))
            {
                guildString = "Guild: " + Program.dictGuilds[this.guildID];
            }

            string output = String.Format("Name: {0}Race: {1} Level: {2}{3}",  this.Name.PadRight(20), raceString.PadRight(10), levelString.PadRight(10),guildString);
            
            return output;
        }


        /*IComparable
         * overrides comparable
         * */
        public int CompareTo(object alpha)
        {
            //Check for null values
            if (alpha == null) return 1;

            //typecast
            Player rightOp = alpha as Player;

            //Items are compared by name
            if (rightOp != null)
                return Name.CompareTo(rightOp.Name);
            else
                throw new ArgumentException("Player CompareTo argument is not an Player");
        }

    }   



    /*Item Class
     * Item object has an id, name, type, ilvl, primary, stamina, requirement and flavor attributes
     * implements IComparable interface
     * * * */
    public class Item : IComparable
    {

        //private attributes
        private uint id;
        private string name;
        private ItemType type;
        private uint ilvl;
        private uint primary;
        private uint stamina;
        private uint requirement;
        private string flavor;


        //public properties
        #region
        //R only
        public uint Id
        {
            get { return id; }
            private set { id = value; }
        }

        //Free R/W
        public string Name
        {
            get { return name; }
            set { name = value; }
        }

        //Free R/W, [0, 12]
        public ItemType Type
        {
            get { return type; }
            set
            {
                if (value >= (ItemType)0 || value <= (ItemType)11)
                    type = value;
                else
                {
                    Console.WriteLine(value + " is not a valid item type");
                }
            }
        }

        //Free R/W, [0, MAX_ILLVL]
        public uint Ilvl
        {
            get { return ilvl; }
            set
            {
                if (value >= 0 || value <= Globals.MAX_ILLVL)
                    ilvl = value;
                else
                {
                    Console.WriteLine(value + " is not a valid level");
                }
            }
        }

        //Free R/W, [0, MAX_PRIMARY]
        public uint Primary
        {
            get { return primary; }
            set
            {
                if (value >= 0 || value <= Globals.MAX_PRIMARY)
                    primary = value;
                else
                {
                    Console.WriteLine(value + " is not a valid Primary");
                }
            }
        }

        //Free R/W, [0, MAX_STAMINA]
        public uint Stamina
        {
            get { return stamina; }
            set
            {
                if (value >= 0 || value <= Globals.MAX_STAMINA)
                    stamina = value;
                else
                {
                    Console.WriteLine(value + " is not valid stamina");
                }
            }
        }

        //Free R/W, [0, MAX_LEVEL]
        public uint Requirement
        {
            get { return requirement; }
            set
            {
                if (value >= 0 || value <= Globals.MAX_LEVEL)
                    requirement = value;
                else
                {
                    Console.WriteLine(value + "is not a valid requirement");
                }
            }
        }

        //Free R/W
        public string Flavor
        {
            get { return flavor; }
            set { flavor = value; }

        }
        #endregion



        /*Constructor
         * default constructor
         * */
        public Item()
        {
            Id = 0;
            Name = "";
            Type = 0;
            Ilvl = 0;
            Primary = 0;
            Stamina = 0;
            Requirement = 0;
            Flavor = "";
            
        }


        /*Constructor
         * constructor with all arguments
         * */
        public Item(uint iId, string iName, ItemType iType, uint iIlvl, uint iPrimary, uint iStamina, uint iRequirement, string iFlavor)
        {
            Id = iId;
            Name = iName;
            Type = iType;
            Ilvl = iIlvl;
            Primary = iPrimary;
            Stamina = iStamina;
            Requirement = iRequirement;
            Flavor = iFlavor;
        }

        /* To String Method
         * overrides toString() method so that items can be output
         * */
        public override string ToString()
        {
            //Displays the item type, name, ilvl, requirement, and flavor
            string output =  String.Format("({0}) {1} |{2}| --{3}--\n\t\"{4}\"", this.Type , this.Name, this.Ilvl, this.Requirement, this.Flavor);
            return output;
        }


        /*IComparable
         * overrides comparable
         * */
        public int CompareTo(object alpha)
        {
            //Check for null values
            if (alpha == null) return 1;
            
            //typecast
            Item rightOp = alpha as Item;

            //Items are compared by name
            if (rightOp != null)
                return Name.CompareTo(rightOp.Name);
            else
                throw new ArgumentException("Item CompareTo argument is not an item");
        }
    }



    public static class Program
    {
        //Files for input
        public static string PLAYERS_FILE = "players.txt";
        public static string GUILDS_FILE = "guilds.txt";
        public static string EQUIPMENT_FILE = "equipment.txt";

        //Create Dictionary for Guilds
        public static Dictionary<uint, string> dictGuilds = new Dictionary<uint, string>();
        //Create Dictionary for Players
        public static Dictionary<uint, Player> dictPlayers = new Dictionary<uint, Player>();
        //Create Dictionary for items
        public static Dictionary<uint, Item> dictItems = new Dictionary<uint, Item>();



        /*Main method
         * read the files and converts them into objects of proper type
         * gives user options to call certain methods 
         * */
        public static int Main()
        {
            Console.WriteLine("Welcome to the World of ConflictCraft: Testing Environment!\n");

            //Read in Guilds
            ReadGuilds(GUILDS_FILE);
            //Read in Players
            ReadPlayers( PLAYERS_FILE);
            //read in items
            ReadItems( EQUIPMENT_FILE);


            string a = "";
            do
            {
                //show message and options
                DisplayOptions();

                a = Console.ReadLine();

                switch (a.ToString())
                {
                    //Print all Players
                    case "1":
                        ListPlayers();
                        break;

                    //Print All Guilds
                    case "2":
                        ListGuilds();
                        break;

                    //Print all gear
                    case "3":
                        ListItems();
                        break;

                    //Print Gear List for Player
                    case "4":
                        //Ask for name
                        Console.Write("Enter the Player Name: ");
                        string gearPlayerName = Console.ReadLine();
                        //try to call method on player name, if player doesn't exist error will be thrown
                        try
                        {
                            dictPlayers[PlayerNameToID(gearPlayerName)].PrintGearList();
                        }
                        catch(PlayerExistException printGearExcept)
                        {
                            Console.WriteLine(printGearExcept);
                        }
                        break;
                        
                    //Leave Guild
                    case "5":
                        LeaveGuild();
                        break;

                    //Join Guild
                    case "6":
                        JoinGuild();
                        break;

                    //Equip Gear
                    case "7":
                        //Ask for name
                        Console.Write("Enter the Player Name: ");
                        string equipPlayerName = Console.ReadLine();
                        //Ask for name of item
                        Console.Write("Enter the item name they will equip: ");
                        string equipItemName = Console.ReadLine();
                        try
                        {
                            dictPlayers[PlayerNameToID(equipPlayerName)].EquipGear(ItemNameToID(equipItemName));
                        }
                        catch(PlayerExistException playerException)
                        {
                            Console.WriteLine(playerException);
                        }
                        catch(ItemExistException itemException)
                        {
                            Console.WriteLine(itemException);
                        }

                        break;

                    //Unequip Gear
                    case "8":
                        UnequipGear();
                        break;

                    //Award Experience
                    case "9":
                        AddExperience();
                        break;

                    //Icomparable test
                    case "T":
                        HiddenOption();
                        break;


                    //all available options to quit out of program
                    //When any are input turn into 10, which exits out of loop
                    case "10":
                    case "q":
                    case "Q":
                    case "quit":
                    case "Quit":
                    case "exit":
                    case "Exit":
                        a = "10";
                        break;

                    //When no valid input recieved
                    default:
                        Console.WriteLine(a + " is not an option.");
                        break;
                }
            }
            while (a != "10");

            return 0;
        }


        /* Read in Guilds
         * takes the file to get data from
         * put guilds from file into dictionary
         * */
        public static void ReadGuilds( string input)
        {
            //string to read lines into
            string tempLine;
            //try block to catch filenotfound
            try
            {
                using (StreamReader inFile = new StreamReader(input))
                {
                    //priming the read
                    tempLine = inFile.ReadLine();
                    //while there is still data in the file
                    while (tempLine != null)
                    {
                        //get each piece of the guild separated by tab into an array
                        string[] inGuilds = tempLine.Split('\t');
                        //if the correct number of attributes are on the line, create a guild from line
                        if (inGuilds.Length == 2)
                        {
                            //Create the guild from the array
                            Guild tempGuild = new Guild(Convert.ToUInt32(inGuilds[0]), inGuilds[1]);
                            //add to dictionary of items
                            dictGuilds.Add(tempGuild.Id, tempGuild.Name);

                        }//end of if length

                        //read next line
                        tempLine = inFile.ReadLine();
                    }//end of while
                }//end of using, items have been read in
            }//end of try
            catch (FileNotFoundException)
            {
                Console.WriteLine(input + "file does not exist");
            }
        }

        /*List Guilds method
         * prints out each Guild from a dictionary of guilds
         * */
        public static void ListGuilds()
        {
            foreach (KeyValuePair<uint, string> pair in dictGuilds)
            {
                Console.WriteLine("{0}", pair.Value);
            }
        }

        /* GuildNameToID
         * asks for a name and returns an id if it is valid, throws GuildExistException if invalid
         * */
        public static uint GuildNameToID(string gName)
        {

            //default return is 0
            uint id = 0;
            //search for name in dictionary, if found change return to id
            foreach (KeyValuePair<uint, string> pair in dictGuilds)
            {
                if (pair.Value == gName)
                {
                    id = pair.Key;
                }
            }
            //if name is not found throw error
            if (id == 0)
            {
                throw new GuildExistException();
            }

            return id;
        }

        /* Leave Guild
         * Gets a player name, then leaves the guild if they are in one
         * */
         public static void LeaveGuild()
        {
            try
            {
                Console.Write("Enter the player name: ");
                string playerName = Console.ReadLine();
                
                if (dictPlayers[PlayerNameToID(playerName)].GuildID != 0)
                {
                    dictPlayers[PlayerNameToID(playerName)].GuildID = 0;
                    Console.WriteLine(playerName + " has left their guild.");
                }
                else
                {
                    //if the guild is 0 they aren't in a guild
                    Console.WriteLine(playerName + " is not in a guild.");
                }
            }
            //Player doesn't exist
            catch (PlayerExistException pEException)
            {
                Console.WriteLine(pEException);
            }
            
        }

        /* Join Guild
         * Asks for a player name, then guild name, then puts player into guild
         * */
         public static void JoinGuild()
        {
            try
            {
                //Get player name and id
                Console.Write("Enter the player name: ");
                String playerName = Console.ReadLine();
                uint playerID = PlayerNameToID(playerName);

                //Get guild name and id
                Console.Write("Enter the guild name: ");
                String guildName = Console.ReadLine();
                uint guildID = GuildNameToID(guildName);

                //have player join guild
                dictPlayers[playerID].GuildID = guildID;
                Console.WriteLine(playerName + " has joined " + guildName);
            }
            catch(PlayerExistException pEException)
            {
                Console.WriteLine(pEException);
            }
            catch (GuildExistException gEException)
            {
                Console.WriteLine(gEException);
            }
        }

        /* Read in Players
         * takes the file the players are stored in
         * puts the items into the dictionary
         * */
        public static void ReadPlayers( string input)
        {
            //string to read lines into
            string tempLine;
            //try block to catch filenotfound
            try
            {
                using (StreamReader inFile = new StreamReader(input))
                {
                    //priming the read
                    tempLine = inFile.ReadLine();
                    //while there is still data in the file
                    while (tempLine != null)
                    {
                        //get each piece of the player separated by tab into an array
                        string[] inPlayers = tempLine.Split('\t');
                        //if the correct number of attributes are on the line, create a player from line
                        if (inPlayers.Length == 20)
                        {
                            
                            //Create the player from the array, convert string to uints and other attributes when necessary
                            Player tempPlayer = new Player(Convert.ToUInt32(inPlayers[0]), inPlayers[1], (Race)Convert.ToUInt32(inPlayers[2]), Convert.ToUInt32(inPlayers[3]), Convert.ToUInt32(inPlayers[4]), Convert.ToUInt32(inPlayers[5]), 
                                Convert.ToUInt32(inPlayers[6]), Convert.ToUInt32(inPlayers[7]), Convert.ToUInt32(inPlayers[8]), Convert.ToUInt32(inPlayers[9]), Convert.ToUInt32(inPlayers[10]), Convert.ToUInt32(inPlayers[11]), Convert.ToUInt32(inPlayers[12]), Convert.ToUInt32(inPlayers[13]), Convert.ToUInt32(inPlayers[14]), Convert.ToUInt32(inPlayers[15]), Convert.ToUInt32(inPlayers[16]), Convert.ToUInt32(inPlayers[17]), Convert.ToUInt32(inPlayers[18]), Convert.ToUInt32(inPlayers[19]));

                            //add to dictionary of players
                            dictPlayers.Add(tempPlayer.Id, tempPlayer);
                            
                        }//end of if length

                        //read next line
                        tempLine = inFile.ReadLine();
                    }//end of while
                }//end of using, items have been read in
            }//end of try
            catch (FileNotFoundException)
            {
                Console.WriteLine(input + "file does not exist");
            }
        }

        /*List Players method
         * prints out each player from a dictionary of players
         * */
        public static void ListPlayers()
        {
            //for every player in the dictionary print it out
            foreach (KeyValuePair<uint, Player> pair in dictPlayers)
            {
                Console.WriteLine("{0}", pair.Value);
            }
        }

        /* PlayerNameToID
         * returns an id if it is valid, throws PlayerExistException if invalid
         * */
         public static uint PlayerNameToID(string pName)
        {
            
            //default return is 0
            uint id = 0;
            //loop through dictionary, if name is found return become id
            foreach (KeyValuePair<uint, Player> pair in dictPlayers)
            {
                if(pair.Value.Name == pName)
                {
                    id = pair.Key;
                }
            }
            //if nothing is found throw error
            if(id == 0)
            {
                throw new PlayerExistException();
            }

            return id;
        }

        /* AddExperience
         * Asks for a name and a number and adds experience to the player
         * */
         public static void AddExperience()
        {
            //Ask for name
            Console.Write("Enter the Player Name: ");
            string expPlayerName = Console.ReadLine();
            //Ask for experience amount
            Console.Write("Enter the amount of experience to award: ");
            string expNum = Console.ReadLine();

            try
            {
                //try to add experience to the player name they entered
                dictPlayers[PlayerNameToID(expPlayerName)].addExp(Convert.ToUInt32(expNum));
            }
            //if the player name is invalid
            catch (PlayerExistException playerException)
            {
                Console.WriteLine(playerException);
            }
            //if they did not enter a number correctly
            catch (FormatException)
            {
                Console.WriteLine("Not a valid number");
            }
            //if the number doesn't fit into unsigned 32 bit integer
            catch (OverflowException)
            {
                Console.WriteLine("Number too large or negative");
            }
            
        }

        /* UnequipGear
         * asks user for player, lists equipped gear and removes chosen gear
         * */
         public static void UnequipGear()
        {
            try
            {

                //Ask for name
                Console.Write("Enter the Player Name: ");
                string unequipPlayerName = Console.ReadLine();
                uint unequipPlayerID = PlayerNameToID(unequipPlayerName);
                //Ask for name of item
                Console.WriteLine("Enter the item slot they will unequip: ");
                //show all item types
                for(int i = 0; i < Enum.GetNames(typeof(ItemType)).Length; i++)
                {
                    //number then slot type
                    Console.WriteLine("\t{0} = {1}", i, (ItemType)i );
                }
                //ask for the slot will be unequipped
                string unequipItemSlot = Console.ReadLine();
            
                //call the unequipgear function on the player specified
                dictPlayers[unequipPlayerID].UnequipGear(Convert.ToInt32(unequipItemSlot));
            }
            //if the player they request is not real
            catch (PlayerExistException playerException)
            {
                Console.WriteLine(playerException);
            }
            //if the item doesn't exist or is not equipped
            catch (ItemExistException itemException)
            {
                Console.WriteLine(itemException);
            }
            //if they did not enter a number correctly
            catch (FormatException)
            {
                Console.WriteLine("Not a valid number");
            }
            //if the number doesn't fit into unsigned 32 bit integer
            catch (OverflowException)
            {
                Console.WriteLine("Number too large or negative");
            }
        }

        /* Read in Items
         * takes the file the items are stored in
         * puts the items into the dictionary
         * */
        public static void ReadItems( string input)
        {
            //string to read lines into
            string tempLine;
            //try block to catch filenotfound
            try
            {
                using (StreamReader inFile = new StreamReader(input))
                {
                    //priming the read
                    tempLine = inFile.ReadLine();
                    //while there is still data in the file
                    while (tempLine != null)
                    {
                        //get each piece of the item separated by tab into an array
                        string[] inItems = tempLine.Split('\t');
                        //if the correct number of attributes are on the line, create an item from line
                        if (inItems.Length == 8)
                        {
                            //Create the item from the array, convert string to uints and ItemTypes when necessary
                            Item tempItem = new Item(Convert.ToUInt32(inItems[0]), inItems[1], (ItemType)Convert.ToUInt32(inItems[2]), Convert.ToUInt32(inItems[3]), Convert.ToUInt32(inItems[4]), Convert.ToUInt32(inItems[5]), Convert.ToUInt32(inItems[6]), inItems[7]);
                            //add to dictionary of items
                            dictItems.Add(tempItem.Id, tempItem);

                        }//end of if length

                        //read next line
                        tempLine = inFile.ReadLine();
                    }//end of while
                }//end of using, items have been read in
            }//end of try
            catch (FileNotFoundException)
            {
                Console.WriteLine(input + "file does not exist");
            }
        }

        /*List Items method
         * prints out each item from a dictionary of items
         * */
        public static void ListItems()
        {
            foreach (KeyValuePair<uint, Item> pair in dictItems)
            {
                Console.WriteLine("{0}", pair.Value);
            }
        }

        /* ItemNameToID
         * asks for a name and returns an id if it is valid, throws ItemExistException if invalid
         * */
        public static uint ItemNameToID(string iName)
        {

            //default return is 0
            uint id = 0;
            //search for name in dictionary, if found change return to id
            foreach (KeyValuePair<uint, Item> pair in dictItems)
            {
                if (pair.Value.Name == iName)
                {
                    id = pair.Key;
                }
            }
            //if name is not found throw error
            if( id == 0)
            {
                throw new ItemExistException();
            }

            return id;
        }

        /* Displays Options
         * displays an introduction and the options for the program
         * */
        public static void DisplayOptions()
        {
            Console.WriteLine("\nWelcome to World of ConflictCraft: Testing Environment. Please select an option from the list below:");
            Console.WriteLine("\t1.) Print All Players");
            Console.WriteLine("\t2.) Print All Guilds");
            Console.WriteLine("\t3.) List All Gear");
            Console.WriteLine("\t4.) Print Gear List for Player");
            Console.WriteLine("\t5.) Leave Guild");
            Console.WriteLine("\t6.) Join Guild");
            Console.WriteLine("\t7.) Equip Gear");
            Console.WriteLine("\t8.) Unequip Gear");
            Console.WriteLine("\t9.) Award Experience");
            Console.WriteLine("\t10.) Quit");

        }

        /*HiddenOption
         * Puts all player and items into sorted sets, then prints out sorted sets with foreach
         * */
        public static void HiddenOption()

        {   //create sorted set of players
            SortedSet<Player> playerSet = new SortedSet<Player>();
            //create sorted set of items
            SortedSet<Item> itemSet = new SortedSet<Item>();


            //fill set with players
            foreach (Player p in dictPlayers.Values)
            {
                playerSet.Add(p);
            }
            //fill set with items
            foreach (Item i in dictItems.Values)
            {
                itemSet.Add(i);
            }


            Console.WriteLine("Sorted Players\n");
            //Output the sorted set of players
            foreach (Player p in playerSet)
            {
                Console.WriteLine(p);
            }
            Console.WriteLine("\nSorted Items\n");
            //Output the sorted set of items
            foreach (Item i in itemSet)
            {
                Console.WriteLine(i);
            }
        }
    }
}
